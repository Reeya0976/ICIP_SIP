(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{293:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(2),r=(n(20),n(25),n(14),n(3),n(18),n(16),n(251),n(186),n(9),n(65),n(47),n(32),n(1)),c=n.n(r),o=n(0),i=n(26),s=n(45),l=n(49),u=n(52),d=n(41),f=n(60),p=n(6),h=n(121),m=n(4),b=function(){function e(){}return e.getData=function(){var t=Object(a.a)(c.a.mark((function t(n){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.getData(n);case 2:return a=t.sent,t.next=5,e.parseData(n,a);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getPopularData=function(){var t=Object(a.a)(c.a.mark((function t(n){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.getData(n);case 2:return a=t.sent,t.next=5,e.parseData(n,a,!0);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getMetas=function(e){return s.a.getMetas(e)},e.setFilters=function(e,t){return s.a.setFilters(e,t)},e.setMetas=function(){var e=Object(a.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s.a.setMetas(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.updateUserCollectionData=function(){var t=Object(a.a)(c.a.mark((function t(){var n,a,r,i,s,l,d,f,p;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=null===(n=Object(o.c)(".collection"))||void 0===n?void 0:n.dataset.id,r={method:"GET"},i=Object.assign({},e.fetchDefaultSettings,r),t.next=5,Object(u.b)(""+e.getCollectionAPI+a,i);case 5:if(!(s=t.sent).data){t.next=13;break}return l=s.data.collection.resources.length,(d=Object(o.c)(".collection .collection__totalr"))&&l&&l>0&&(f=1===l?"%s Resource":"%s Resources",p=Object(m.a)(f,l),d.innerText=p,d.classList.remove("hide")),t.next=12,e.parseUserCollectionData(s);case 12:return t.abrupt("return",t.sent);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),e.parseUserCollectionData=function(){var e=Object(a.a)(c.a.mark((function e(t){var n,a,r,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=t.getPathValue("data.collection.resources")||[]).length&&(t.data.resources=n,t.isUserCollection=!0,a=Object(i.a)(Object.keys(o.e.FiltersEnabled)),r=s.a.api+"?"+d.a.objectToString(Object.assign({},a,{format:l.a.template})),(u=f.a.get(r)).data.resources=n,f.a.set({key:r,value:u,time:1800})),e.abrupt("return",t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.parseData=function(){var e=Object(a.a)(c.a.mark((function e(t,n,a){var r,o,i,l,u,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(void 0===a&&(a=!1),!t.url||!t.location){e.next=15;break}if(r=new URL(t.location),o=d.a.stringToObject(t.url),i=""+BASE_URL+r.pathname.split("/")[1],!(0<Object(p.numberNormalizer)(n.meta.summary.total||"0")&&0===Object(p.numberNormalizer)(n.meta.summary.total_collections||"0"))){e.next=14;break}return(l=Object.assign({},t)).url=t.url.replace("format=collections","format=search"),e.next=10,s.a.getData(l);case 10:u=e.sent,(f=u.getPathValue("data.resources")||[]).length&&(n.data.resources=f),u.paging.next&&u.paging.next_params&&(n.paging||(n.paging={}),n.paging.view_more=u.paging.next,n.paging.view_more_params=u.paging.next_params);case 14:n.paging&&n.paging.page&&a&&(n.paging.next&&(n.paging.next=i+"/"+(n.paging.page+1),n.paging.nextDataFilter="sort=popular&type="+o.type+"&format=popular&selection=1&page="+(n.paging.page+1)),n.paging.previous&&(n.paging.previous=i+"/"+(n.paging.page-1),n.paging.previousDataFilter="sort=popular&type="+o.type+"&format=popular&selection=1&page="+(n.paging.page-1)));case 15:return e.abrupt("return",n);case 16:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),e.pinterestShareSettings=function(e){var t="%23"+e.collectionTitle.substr(0,e.collectionTitle.indexOf(",")).toLowerCase().replace(/\s/gi,"");return{description:Object(h.a)(e.collectionTitle,40)+" %23Freepik "+t}},e}();b.fetchDefaultSettings={withCredentials:!0,method:"POST",headers:{"X-Requested-With":"XMLHttpRequest"}},b.getCollectionAPI="/xhr/user/one_collection/"},438:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));n(25),n(32),n(3),n(5),n(9),n(47),n(88),n(21),n(22),n(65),n(44);var a=n(0),r=n(91),c=n(4),o=function(){function e(){this.Networks={facebook:{name:"Facebook",class:"facebook",url:"https://www.facebook.com/dialog/share?app_id="+FACEBOOK_APP_ID+"&display=popup&href={url}&quote={description}"},twitter:{name:"Twitter",class:"twitter",url:"https://twitter.com/intent/tweet?text={title}&text={description}&via={origin}&url={url}&hashtags={hashtags}"},google:{name:"Google+",class:"google",url:"https://plus.google.com/share?url={url}"},pinterest:{name:"Pinterest",class:"pinterest",url:"https://pinterest.com/pin/create/button/?media={image}&url={url}&is_video={video}&description={description}"},whatsapp:{name:"Whatsapp",class:"whatsapp",url:"https://wa.me/?text={message}"},telegram:{name:"Telegram",class:"telegram",url:"https://telegram.me/share/url?url=${url}&text={message}"},linkedin:{name:"Telegram",class:"telegram",url:"https://www.linkedin.com/shareArticle?mini=true&url={url}&source={origin}&title={title}&summary={description}"}}}var t=e.prototype;return t.generateURL=function(e){var t=Object.keys(e),n=this.Networks[e.network];if(e.url.indexOf("#")>=0&&(e.url=e.url.substr(0,e.url.indexOf("#"))),e.url=encodeURI(e.url),n){var a=JSON.parse(JSON.stringify(n.url));return t.forEach((function(t){var r=e[t];"twitter"===n.class&&"title"===t&&"share-collection"!==e.ga.name&&(r=Object(c.a)("Freepik - Free Graphic resources for everyone on %s","@freepik")),"pinterest"===n.class?("url"===t&&(r=encodeURIComponent(r).replace("&","%26")),"description"===t&&(r=r.replace("|","%7C"))):r=encodeURIComponent(r).replace("&","%26").replace("|","%7C");var o=new RegExp("{"+t+"}","g");a=a.replace(o,r)})),this.cleanURL(a)}},t.cleanURL=function(e){var t=(e=e.replace(/\{([^{}]*)}/g,"")).match(/[^\=\&\?]+=[^\=\&\?]+/g),n=e.split("?")[0];return t&&t.length>0&&(n+="?"+t.join("&")),n},t.popup=function(e,t){var n=t.width,a=t.height,c=this.generateURL(e);if(c){var o="\n                width="+n+",\n                height="+a+",\n                left="+Math.floor(((screen.availWidth||1024)-n)/2)+",\n                top="+Math.floor(((screen.availHeight||700)-a)/2)+",\n                location=0,\n                menubar=0,\n                toolbar=0,\n                status=0,\n                scrollbars=1,\n                resizable=1\n            ";r.a.apply(void 0,["send","event",e.ga.name,e.network].concat(e.ga.myArguments)),window.open(c,"social",o)}},e}();Object(a.a)(".button .button--popover","click",(function(e){e.preventDefault();var t=this.parents(".button");if(t.length){var n=t[0];if(n){var a=window.location.href,r=n.querySelector("h2"),c=n.querySelector(".detail__gallery img"),o=this.dataset.network,s=this.parent(".detail__preview");if(a&&r&&c&&o){var l=c.src;if(l){var u={network:o,title:r.innerText,image:l,url:a,ga:{name:s?"share_buttons_detail-preview":"share_buttons_detail",myArguments:[n.dataset.id||""]}};i.popup(u,{width:800,height:500})}}}}}));var i=new o},677:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var a,r=n(2),c=n(1),o=n.n(c),i=(n(20),n(3),n(5),n(44),n(0)),s=n(151),l=n(7),u=n(26),d=n(4),f=n(438),p=n(8),h=n(49),m=n(52),b=n(292),v=n(293),g="followed",O="collection",w=function(e){var t=Object(u.a)("format").format,n=e.getPathValue("detail.meta.summary.total")||e.getPathValue("detail.xhr.meta.summary.total")||0,r=e.getPathValue("detail.meta.summary.total_collections")||e.getPathValue("detail.xhr.meta.summary.total_collections")||0;x(),a&&"collections"===t&&a.destroy(),"collections"!==t||0!==n||0!==r||Object(s.b)("figure.showcase__item, .collection__item").length||(a=new b.a)},j=function(e){e.length>0&&e.forEach((function(e){return Object(s.b)('.collection[data-id="'+e+'"]').forEach((function(e){Object(s.b)(".collection-follow",e).forEach((function(e){var t=Object(i.c)("span",e),n=Object(i.c)("i",e);t&&(FEATURE_NEW_COPIES_COLLECTIONS_BY_COUNTRY?(t.innerText=Object(d.a)("Remove"),null==n||n.classList.remove("icon--create-folder"),null==n||n.classList.add("icon--remove-folder")):t.innerText=Object(d.a)("Unfollow")),(e.classList.contains("button")||e.classList.contains("collection-follow"))&&e.classList.add("active")}))}))})),Object(s.b)(".collection-follow").forEach((function(e){return e.classList.remove("button--loading")}))},x=function(){var e=Object(r.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===t&&(t=!1),e.next=3,p.UserHelpers.isLogged(!1);case 3:if(!e.sent){e.next=18;break}if(n=l.b.get(O,g),t||!n){e.next=8;break}return j(n),e.abrupt("return");case 8:return e.prev=8,e.next=11,Object(m.b)("/xhr/user/collection/followed",Object.assign({},m.a.settings,{method:"get"}));case 11:(a=e.sent).success&&a.data.collections&&(l.b.set(O,g,a.data.collections),j(a.data.collections)),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(8),console.error("There was a problem with collection/followed request",e.t0);case 18:case"end":return e.stop()}}),e,null,[[8,15]])})));return function(t){return e.apply(this,arguments)}}();Object(i.a)("#modal-collection-share .social button","click",(function(){var e=this.parent(".share");if(e){var t=e.dataset.id,n=e.dataset.image,a=this.dataset.network,r=e.dataset.title,c=e.dataset.url;if(a&&r&&c){var o={image:n,network:a,title:r,url:c,ga:{name:"share-collection",myArguments:[t]}};"pinterest"===a&&(o=Object.assign({},o,v.a.pinterestShareSettings({collectionTitle:r,collectionPremium:0!=(e.dataset.premium||0)}))),f.a.popup(o,{width:800,height:500})}}})),["static"].concat(h.a.getGroup("search")).forEach((function(e){return window.addEventListener("print"+e,w)}))},836:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return g}));var a=n(2),r=n(1),c=n.n(r),o=(n(14),n(3),n(15),n(18),n(16),n(20),n(99),n(5),n(9),n(22),n(273),n(84),n(98),n(58),n(44),n(25),n(133),n(134),n(88),n(21),n(46),n(382),n(0)),i=n(13),s=n(36),l=n(174),u=n(4),d=n(113),f=n(111),p=n(677),h=n(8),m=n(52),b=n(109),v=n(91),g=function(){function e(){return e.instance||(e.instance=this),e}return e.dialog=function(t){var n=o.e.ModalInstance.print(t,!1);return o.e.ModalInstance.show("modal-"+t.name),n?(e.focus(n),n.classList.add("collections__modal"),n.addEventListener("hide",(function(){return e.dialogDestroy(n)})),n):null},e.dialogConfirm=function(){var t=Object(a.a)(c.a.mark((function t(a){var r,i,s,l,u,d,f,p,h;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=function(){return n.e(94).then(n.t.bind(null,791,7))},t.next=3,r();case 3:if(i=t.sent,s=i.default,!(l=o.e.ModalInstance.print(Object.assign({},a,{html:s({html:a.html})}),!0))){t.next=20;break}if(u=Object(o.c)("button.cancel",l),d=Object(o.c)("button.confirm",l),f=Object(o.c)("form",l),e.focus(l),l.classList.add("collections__modal"),l.addEventListener("hide",(function(){return e.dialogDestroy(l)})),!(u&&d&&f)){t.next=20;break}return p={confirm:d,form:f,name:a.name},t.next=17,new Promise((function(t,n){u.addEventListener("click",(function(){o.e.ModalInstance.hide(),n(!1)})),d.addEventListener("click",(function(){return e.dialogValidation(f,(function(){return t(p)}))})),f.addEventListener("submit",(function(){return e.dialogValidation(f,(function(){return t(p)}))})),l.addEventListener("hide",(function(){return n(!1)}))}));case 17:return"object"==typeof(h=t.sent)&&o.e.ModalInstance.hide({all:!0}),t.abrupt("return",h);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.dialogDestroy=function(e,t){var n="string"==typeof e?document.getElementById("modal-"+e):e;n&&(t&&t(),setTimeout((function(){n.parentElement&&n.parentElement.removeChild(n),Object(b.a)()}),parseFloat(i.a["base-duration"])))},e.dialogValidation=function(e,t){return e.checkValidity()?(t&&t(),!0):(Object(o.d)("input[required], select[required], textarea[required]").forEach((function(e){e.classList[e.checkValidity()?"remove":"add"]("error")})),!1)},e.collectionDomObjects=function(e){var t=e.parent(".collection");if(t&&t.dataset.id&&t.dataset.authorId&&t.dataset.type){var n=Object(o.d)(".collection__description-text",t),a=Object(o.d)(".collection-follow",t),r=Object(o.d)(".collection__link",t),c=Object(o.d)(".collection__title",t),i=Object(o.c)("svg image",t);if(r.length&&c.length)return{element:t,files:Object(o.c)(".collection__files",t),link:r,title:c,follow:a,description:n,type:Object(o.c)(".collection__type",t),pageType:t.nodeName.match(/ARTICLE/i)?"article":"page",data:{authorId:t.dataset.authorId,description:n[0]?n[0].innerText:"",id:t.dataset.id,image:i?i.href.baseVal:"",shareText:t.dataset.shareText||document.title,shareUrl:t.dataset.shareUrl||window.location.href,title:c[0]?c[0].innerText:"",totalElements:Number(t.dataset.elements)||0,totalFollowers:Number(t.dataset.followers)||0,type:t.dataset.type,url:t.dataset.shareUrl||r[0].href}}}return null},e.resourceDomObjects=function(e){var t=e.parent(".showcase__item")||e.parent(".detail");if(t&&t.dataset.id&&t.dataset.w&&t.dataset.h){var n=Object(o.c)(".showcase__link",t)||Object(o.c)(".collection__link",t)||t,a=Object(o.c)(".title",t)||Object(o.c)("h1",t),r=a?a.textContent:t.dataset.title;if(n&&r)return{element:t,title:a,data:{id:t.dataset.id,image:t.dataset.image||n.dataset.image||n.dataset.thumbnailsLarge,imageHeight:t.dataset.h,imageWidth:t.dataset.w,title:r}}}return null},e.request=function(){var t=Object(a.a)(c.a.mark((function t(n,a){var r,o,i,u,p,h,b;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object.assign({},e.fetchDefaultSettings,a,m.a.settings),o="Sorry, we have had an unexpected error. Can you try later?",Object(f.a)("top-right"),n.dialog&&n.dialog.confirm.classList.add("button--loading"),r&&((r.method||"").match(/get/gi)&&(n.url=n.url+"?"+e.requestParams(n.body)),(r.method||"").match(/post/gi)&&(r.data=n.body)),t.prev=5,t.next=8,Object(m.b)(n.url,r);case 8:return i=t.sent,u=i.success,p=i.message,h=i.data,!u&&p&&(console.error(p),Object(d.a)(o)),FEATURE_NEW_COPIES_COLLECTIONS_BY_COUNTRY&&u&&h.collection&&h.collection.id&&(b=Object(s.a)(),Object(l.f)({collection_id:h.collection.id||"",collection_name:h.collection.name||"",location:window.location.href.includes("user/collections")?"my_collections":b?"resource_detail":"thumbnail"})),t.abrupt("return",i);case 15:if(t.prev=15,t.t0=t.catch(5),console.error(t.t0),429!==t.t0.status){t.next=22;break}return t.next=21,e.limit();case 21:return t.abrupt("return",t.sent);case 22:Object(d.a)(o);case 23:return t.prev=23,n.dialog&&(e.dialogDestroy(n.dialog.name),n.dialog.confirm.classList.remove("button--loading")),t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[5,15,23,26]])})));return function(e,n){return t.apply(this,arguments)}}(),e.requestParams=function(e){var t;if("function"==typeof e&&(t=[].concat(e.entires()).map((function(e){return encodeURIComponent(e[0])+"="+encodeURIComponent(e[1])})).join("&")),"string"==typeof e){var n=JSON.parse(e);t=Object.keys(n).map((function(e){return encodeURIComponent(e)+"="+encodeURIComponent(n[e])})).join("&")}return t},e.create=function(){var t=Object(a.a)(c.a.mark((function t(){var a,r,o,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=function(){return n.e(95).then(n.t.bind(null,792,7))},t.next=3,a();case 3:return r=t.sent,o=r.default,t.next=7,e.dialogConfirm({html:o(),multilayer:!1,name:"collection-create"});case 7:if("object"!=typeof(i=t.sent)){t.next=12;break}return t.next=11,e.request({body:new FormData(i.form),dialog:i,url:"/xhr/user/collection/create"});case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),e.delete=function(){var t=Object(a.a)(c.a.mark((function t(a){var r,o,i,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=function(){return n.e(96).then(n.t.bind(null,793,7))},t.next=3,r();case 3:return o=t.sent,i=o.default,t.next=7,e.dialogConfirm({html:i({id:a}),multilayer:!1,name:"collection-delete"});case 7:if("object"!=typeof(s=t.sent)){t.next=12;break}return t.next=11,e.request({body:new FormData(s.form),dialog:s,url:"/xhr/user/collection/delete"});case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.list=function(t){return e.request({body:JSON.stringify(t),url:"/xhr/user/collection"},{method:"GET"})},e.remove=function(){var t=Object(a.a)(c.a.mark((function t(a,r){var o,i,s,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=function(){return n.e(104).then(n.t.bind(null,794,7))},t.next=3,o();case 3:return i=t.sent,s=i.default,t.next=7,e.dialogConfirm({html:s({collectionId:r,resourceId:a}),multilayer:!1,name:"resource-remove"});case 7:if("object"!=typeof(l=t.sent)){t.next=12;break}return t.next=11,e.request({body:new FormData(l.form),dialog:l,url:"/xhr/user/collection/delete/element"});case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.rename=function(){var t=Object(a.a)(c.a.mark((function t(a,r){var o,i,s,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=function(){return n.e(103).then(n.t.bind(null,795,7))},t.next=3,o();case 3:return i=t.sent,s=i.default,t.next=7,e.dialogConfirm({html:s({id:a,name:r}),multilayer:!1,name:"collection-rename"});case 7:if("object"!=typeof(l=t.sent)){t.next=12;break}return t.next=11,e.request({body:new FormData(l.form),dialog:l,url:"/xhr/user/collection/update"});case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.description=function(){var t=Object(a.a)(c.a.mark((function t(a,r){var o,i,s,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=function(){return n.e(97).then(n.t.bind(null,796,7))},t.next=3,o();case 3:return i=t.sent,s=i.default,t.next=7,e.dialogConfirm({html:s({id:a,description:r}),multilayer:!1,name:"collection-description"});case 7:if("object"!=typeof(l=t.sent)){t.next=12;break}return t.next=11,e.request({body:new FormData(l.form),dialog:l,url:"/xhr/user/collection/update"});case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.searchList=function(e,t){Object(o.d)("#modal-collection-add .collections__list li").forEach((function(n){var a=new RegExp(e.value,"gi");(n.dataset.name||"").match(a)?n.classList.remove("hide"):e.value.length>=Number(t)&&n.classList.add("hide")}))},e.searchApi=function(){var t=Object(a.a)(c.a.mark((function t(r,i,s){var l,u,d,f,p,h;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=function(){return n.e(92).then(n.t.bind(null,685,7))},t.next=3,l();case 3:if(u=t.sent,d=u.default,f=Object(o.c)("#modal-collection-add .collections__list ul"),p=Object(o.c)("#modal-collection-add .collections__list-search"),(h=new FormData).set("q",r.value),h.set("resourceId",s),!f||!p){t.next=17;break}if(clearInterval(e.searchTimeout),!(r.value.length>=i)){t.next=16;break}return t.next=15,setTimeout(Object(a.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.request({url:"/xhr/user/collection/search",body:h});case 2:(n=t.sent).success&&(p.classList.add("show"),p.innerHTML=d({collections:n.data.collections}),Object(o.d)("li",p).forEach((function(e){return e.addEventListener("click",(function(){r.value="",p.innerHTML="",p.classList.remove("show"),Object(o.d)("li",f).forEach((function(t){t.dataset.id===e.dataset.id&&t.parentElement&&t.parentElement.removeChild(t)})),f.insertAdjacentElement("afterbegin",e)}))})));case 4:case"end":return t.stop()}}),t)}))),400);case 15:e.searchTimeout=t.sent;case 16:r.value.length||p.classList.remove("show");case 17:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),e.follow=function(){var t=Object(a.a)(c.a.mark((function t(n){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=new FormData).append("collectionId",n),t.next=4,e.request({body:a,url:"/xhr/user/follow_collection"},{method:"post"});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.limit=function(){var e=Object(a.a)(c.a.mark((function e(){var t,a,r,i,s;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=function(){return n.e(98).then(n.t.bind(null,797,7))},e.next=3,t();case 3:a=e.sent,r=a.default,i={html:r({URL_STATIC_IMG:URL_STATIC_IMG,COLLECTION_LIMIT:COLLECTION_LIMIT}),name:"limit-collections"},(s=o.e.ModalInstance.print(i))&&s.classList.add("collections__modal--limit");case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),e.checkCollectionsLimit=function(e,t){void 0===e&&(e=null),void 0===t&&(t=!1);var n=COLLECTION_COUNT;return e&&(n=COLLECTION_COUNT+e),!!(n&&COLLECTION_LIMIT&&!t&&n>=COLLECTION_LIMIT||t&&n>COLLECTION_LIMIT)},e.updateCollectionsCount=function(){COLLECTION_COUNT&&COLLECTION_COUNT++},e.share=function(){var t=Object(a.a)(c.a.mark((function t(a){var r,o,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=function(){return n.e(105).then(n.t.bind(null,798,7))},t.next=3,r();case 3:o=t.sent,i=o.default,e.dialog({html:i(a),multilayer:!1,name:"collection-share"});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.syncEventListeners=function(t,n){var a=Object(o.c)(".collection-sync",t),r=Object(o.c)(".modal__close",t),c=Object(o.c)(".collection-add-temporal",t),i=Object(o.c)(".collection-search input",t),s=Object(o.c)(".collection-add-temporal input[name=collectionName]",t),l=Object(o.c)(".collection-add-temporal button",t);if(t.setAttribute("data-disable-mouse-up",""),t.classList.add("collections__modal--add"),Object(o.a)(".collections__list ul label","click",e.eventHandlerSyncCollectionToggle,t),a){var u=[];"function"==typeof n&&u.push(n),a.addEventListener("click",(function(t){return e.eventHandlerSyncCollectionSubmit.apply(a,[t].concat(u))}))}r&&r.addEventListener("click",e.eventHandlerSyncCollectionClose),c&&c.addEventListener("submit",e.eventHandlerSyncCollectionTemporal),i&&a&&i.addEventListener("keyup",(function(t){return e.eventHandlerSyncCollectionSearch.call(i,a.dataset.resourceId,t)})),e.enableAddNewCollection(s,l),t.addEventListener("hide",(function(){return e.dialogDestroy(t,(function(){return Object(o.b)(".collections__list label","click",e.eventHandlerSyncCollectionToggle,t)}))}))},e.syncGetCollectionData=function(t,n){void 0===n&&(n=!1);var a={resourceId:t,add_new:[],add:[],delete:[]},r=0;return Object(o.d)("#modal-collection-add .collections__list input:checked").forEach((function(t){if(t.dataset.action&&a[t.dataset.action]){if(n&&"add_new"===t.dataset.action&&(r++,e.checkCollectionsLimit(r,n)))return;a[t.dataset.action].push("add_new"===t.dataset.action?t.dataset.name:t.value)}})),a},e.syncEnableAddButton=function(t){var n=Object(o.c)(".collection-add-temporal input[name=collectionName]"),a=Object(o.c)(".collection-add-temporal button"),r=e.syncGetCollectionData(t).add_new.length;e.enableAddNewCollection(n,a,r)},e.enableAddNewCollection=function(t,n,a){if(void 0===a&&(a=0),t&&n){var r=e.checkCollectionsLimit(a)?"add":"remove";t.classList[r]("disabled"),n.classList[r]("disabled"),"add"===r&&t.blur()}},e.syncEnableSaveButton=function(t){var n=Object(o.c)(".collection-sync"),a=e.syncGetCollectionData(t);n&&n.classList[a.add_new.length||a.add.length||a.delete.length?"remove":"add"]("disabled")},e.type=function(){var t=Object(a.a)(c.a.mark((function t(a,r,o){var i,s,l,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=function(){return n.e(101).then(n.t.bind(null,799,7)).then((function(e){return e.default}))},s=function(){return n.e(102).then(n.t.bind(null,800,7)).then((function(e){return e.default}))},t.next=4,"private"===r?i():s();case 4:return l=t.sent,t.next=7,e.dialogConfirm({html:l({id:a,followers:o||"0"}),multilayer:!1,name:"collection-rename"});case 7:if("object"!=typeof(u=t.sent)){t.next=12;break}return t.next=11,e.request({body:new FormData(u.form),dialog:u,url:"/xhr/user/collection/update"});case 11:return t.abrupt("return",t.sent);case 12:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),e.focus=function(e){var t=e.querySelector('input[type="text"]');setTimeout((function(){t&&t.focus()}),250)},e.eventHandlerSyncCollectionClose=function(){var t=Object(a.a)(c.a.mark((function t(){var a,r,i,s,l;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(o.c)("#modal-collection-add .collection-sync"),r=function(){return n.e(93).then(n.t.bind(null,801,7))},t.next=4,r();case 4:if(i=t.sent,s=i.default,!a){t.next=13;break}if(!((l=e.syncGetCollectionData(a.dataset.resourceId||"")).add_new.length||l.add.length||l.delete.length)){t.next=13;break}return t.next=11,e.dialogConfirm({name:"collection-confirm",html:s(),multilayer:!1});case 11:"object"==typeof t.sent&&o.e.ModalInstance.hide();case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),e.eventHandlerSyncCollectionSearch=function(){var t=Object(a.a)(c.a.mark((function t(n){var a,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=this.dataset.collectionsTotal===this.dataset.collectionsRendered?e.searchList:e.searchApi,r=[this,parseFloat(this.min||"2")],a===e.searchApi&&r.push(n),a.apply(this,r);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.eventHandlerSyncCollectionSubmit=function(){var t=Object(a.a)(c.a.mark((function t(n,a){var r,i;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.syncGetCollectionData(this.dataset.resourceId||"",!0),this.classList.add("button--loading"),!(r.add_new.length||r.add.length||r.delete.length)){t.next=11;break}return t.next=5,e.request({url:"/xhr/user/collection/sync",body:JSON.stringify(r)});case 5:if((i=t.sent)&&i.cerberusInvalid&&document.location.reload(),i.success&&(r.add_new.length&&r.add_new.forEach((function(t){e.updateCollectionsCount(),FEATURE_NEW_COPIES_COLLECTIONS_BY_COUNTRY?(Object(l.a)(r.resourceId,t,!0),Object(v.a)("send","event","collection","create"),Object(v.a)("send","event","collection","add_resource","new")):(Object(v.a)("send","event","collection","create"),Object(v.a)("send","event","collection","add_resource","new"),Object(l.a)(r.resourceId,t,!0))})),r.add.length&&r.add.forEach((function(e){FEATURE_NEW_COPIES_COLLECTIONS_BY_COUNTRY?(Object(l.a)(r.resourceId,e),Object(v.a)("send","event","collection","add_resource",e)):(Object(v.a)("send","event","collection","add_resource",e),Object(l.a)(r.resourceId,e))})),r.delete.length&&r.delete.forEach((function(e){Object(v.a)("send","event","collection","remove_resource",e)})),e.updateCurrentCollection(r.add,r.delete)&&document.location.reload()),!a){t.next=11;break}return t.next=11,a();case 11:o.e.ModalInstance.hide(),n.preventDefault();case 13:case"end":return t.stop()}}),t,this)})));return function(e,n){return t.apply(this,arguments)}}(),e.updateCurrentCollection=function(t,n){var a,r=null===(a=Object(o.c)(".collection"))||void 0===a?void 0:a.dataset.id;return!!r&&(e.findCurrentCollectionChanges(t,r)||e.findCurrentCollectionChanges(n,r))},e.findCurrentCollectionChanges=function(e,t){return e.filter((function(e){return t==e})).length>0},e.eventHandlerSyncCollectionToggle=function(t,n){var a=Object(o.c)('input[name="collections"]',this);if(a&&(a.dataset.action||"").match(/none|delete|add_new/)){var r=a.dataset.action;a.classList.toggle("changed"),a.dataset.action=a.dataset.action==a.dataset.previousAction?"none"===a.dataset.action?"delete":"none":a.dataset.previousAction,a.dataset.previousAction=r,n&&n(a),t.preventDefault(),t.stopPropagation()}e.syncEnableSaveButton(this.dataset.resourceId||""),e.syncEnableAddButton(this.dataset.resourceId||"")},e.eventHandlerSyncCollectionTemporal=function(){var t=Object(a.a)(c.a.mark((function t(){var a,r,i,s,l,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=new FormData(this),r=Object(o.d)("input[required], textarea[required], select[required]",this),i=Object(o.c)(".collections__list ul"),s=function(){return n.e(100).then(n.t.bind(null,802,7))},t.next=6,s();case 6:l=t.sent,u=l.default,r.forEach((function(e){(e.parent(".group")||e).classList[e.checkValidity()?"remove":"add"]("error")})),this.checkValidity()&&(i&&(i.scrollTop=0,i.insertAdjacentHTML("afterbegin",u({name:a.get("collectionName")}))),e.syncEnableSaveButton(this.dataset.resourceId||""),e.syncEnableAddButton(this.dataset.resourceId||""),this.reset());case 10:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.eventHandlerCreate=function(){var t=Object(a.a)(c.a.mark((function t(){var a,r,i,s,l,u,d,f,p;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.checkCollectionsLimit()){t.next=4;break}return t.next=3,e.limit();case 3:return t.abrupt("return",t.sent);case 4:return a=Object(o.c)(".collection__item")||Object(o.c)(".collections--showcase .container .row"),r=Object(o.c)(".collections__header"),i=Object(o.c)(".user__no-content"),t.next=9,e.create();case 9:return s=t.sent,l=function(){return n.e(99).then(n.t.bind(null,803,7))},t.next=13,l();case 13:u=t.sent,d=u.default,s&&s.cerberusInvalid&&document.location.reload(),s&&s.success&&a&&r&&(Object(v.a)("send","event","collection","create"),f=Object(o.d)(".collections__count"),p=h.UserHelpers.getData(),a.insertAdjacentHTML(a.classList.contains("collection__item")?"beforebegin":"afterbegin",d(Object.assign({},s.data.collection,{user:p,URL_STATIC_IMG:URL_STATIC_IMG}))),r.classList.remove("hide"),i&&i.classList.add("hide"),f.forEach((function(e){return e.innerText=(parseFloat(e.innerText||"0")+1).toString()})),e.updateCollectionsCount());case 17:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),e.eventHandlerDelete=function(){var t=Object(a.a)(c.a.mark((function t(){var n,a,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.collectionDomObjects(this),a=Object(o.d)(".collections__count"),!n){t.next=11;break}return t.next=5,e.delete(n.data.id);case 5:(r=t.sent)&&r.cerberusInvalid&&document.location.reload(),r.success&&Object(v.a)("send","event","collection","delete",n.data.id),n.element.parentElement&&n.element.parentElement.removeChild(n.element),0===Object(o.d)(".collection").filter((function(e){return!e.classList.contains("collection--fake")})).length&&(window.location.href=BASE_URL+"user/collections"),Object(o.d)(".pagination__prev, .pagination__next").length&&(window.location.href=BASE_URL+"user/collections");case 11:a.forEach((function(e){return e.innerText=(parseFloat(e.innerText||"0")-1).toString()}));case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.eventHandlerRemove=function(){var t=Object(a.a)(c.a.mark((function t(){var n,a,r,i,s,l,d;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.resourceDomObjects(this),a=e.collectionDomObjects(this),!n||!a){t.next=8;break}return t.next=5,e.remove(n.data.id,a.data.id);case 5:(r=t.sent)&&r.cerberusInvalid&&document.location.reload(),n.element.parentElement&&r&&r.success&&(n.element.parentElement.removeChild(n.element),Object(v.a)("send","event","collection","remove_resource",a.data.id),(i=Object(o.c)(".collection .collection__totalr"))&&r.data.collections&&r.data.collections[0]&&r.data.collections[0].elements&&(s=r.data.collections[0].elements.length,l=1===s?"%s Resource":"%s Resources",d=Object(u.a)(l,s),i.innerText=d,0===s&&window.location.reload()));case 8:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.eventHandlerRename=function(){var t=Object(a.a)(c.a.mark((function t(){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.collectionDomObjects(this))){t.next=7;break}return t.next=4,e.rename(n.data.id,n.title[0].innerText);case 4:(a=t.sent)&&a.cerberusInvalid&&document.location.reload(),a.success&&(n.link.forEach((function(e){return e.href=a.data.collection.url})),n.title.forEach((function(e){return e.innerText=a.data.collection.name})),Object(v.a)("send","event","collection","rename",n.data.id));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.eventHandlerDescription=function(){var t=Object(a.a)(c.a.mark((function t(){var n,a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.collectionDomObjects(this))||!n.description.length){t.next=7;break}return t.next=4,e.description(n.data.id,n.description[0].innerText);case 4:(a=t.sent)&&a.cerberusInvalid&&document.location.reload(),a.success&&(n.description.forEach((function(e){e.innerText=a.data.collection.description,e.classList[a.data.collection.description="remove"]("hide")})),Object(v.a)("send","event","collection","edit_description",n.data.id));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.eventHandlerShare=function(){var t=e.collectionDomObjects(this);t&&(Object(v.a)("send","event","collection","share",t.data.id),e.share(t.data))},e.eventHandlerFollow=function(){var t=Object(a.a)(c.a.mark((function t(){var n,a,r,i,s;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.collectionDomObjects(this),t.t0=n,!t.t0){t.next=6;break}return t.next=5,h.UserHelpers.isLogged(!0);case 5:t.t0=t.sent;case 6:if(!t.t0){t.next=19;break}return n.follow.forEach((function(e){return e.classList.add("button--loading")})),t.prev=8,t.next=11,e.follow(n.data.id);case 11:(a=t.sent).success&&(r=n.element,i=r.closest("section.user"),Object(v.a)("send","event","collection",a.data.action,n.data.id),(s="follow"===a.data.action)&&Object(l.d)(n.data),i&&"follow"!=a.data.action&&"article"===n.pageType?r.remove():n.follow.forEach((function(e){var t=Object(o.c)("span",e),n=Object(o.c)("i",e);t&&(FEATURE_NEW_COPIES_COLLECTIONS_BY_COUNTRY?(t.innerText=s?Object(u.a)("Remove"):Object(u.a)("Save collection"),null==n||n.classList[s?"add":"remove"]("icon--remove-folder"),null==n||n.classList[s?"remove":"add"]("icon--create-folder")):t.innerText="follow"==a.data.action?Object(u.a)("Unfollow"):Object(u.a)("Follow")),(e.classList.contains("collection-follow")||e.classList.contains("button"))&&e.classList[s?"add":"remove"]("active")}))),t.next=17;break;case 15:t.prev=15,t.t1=t.catch(8);case 17:n.follow.forEach((function(e){return e.classList.remove("button--loading")})),Object(p.a)(!0);case 19:case"end":return t.stop()}}),t,this,[[8,15]])})));return function(){return t.apply(this,arguments)}}(),e.eventHandlerType=function(){var t=Object(a.a)(c.a.mark((function t(){var n,a,r;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.collectionDomObjects(this))){t.next=7;break}return a="private"===n.data.type?"public":"private",t.next=5,e.type(n.data.id,a,n.data.totalFollowers);case 5:t.sent.success&&(n.element.dataset.type=a,"public"===a&&Object(v.a)("send","event","collection","set_public",n.data.id),(r=Object(o.c)(".collection .collection-share"))&&r.classList["public"===a?"remove":"add"]("hide"));case 7:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),e.eventHandlerSync=function(){var t=Object(a.a)(c.a.mark((function t(a){var r,o,i,s,l,u;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.resourceDomObjects(this),o=function(){return n.e(55).then(n.t.bind(null,804,7))},t.next=4,o();case 4:if(i=t.sent,s=i.default,!r){t.next=13;break}return t.next=9,e.list({resourceId:r.data.id,limit:50});case 9:l=t.sent,(u=e.dialog({name:"collection-add",html:s({collections:l.data.collections,renderedCollections:l.data.collections.length,resource:r.data,showSearch:l.data.collections.length>=8,totalCollections:l.totalCollections,COLLECTION_LIMIT:COLLECTION_LIMIT}),multilayer:!1}))&&e.syncEventListeners(u,a),e.fadeOutList();case 13:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}(),e.fadeOutList=function(){var e=Object(o.c)("#modal-collection-add .collections__list ul");e&&(e.onscroll=function(){var t=Object(o.d)("li",e)[4];t&&(e.offsetHeight+e.scrollTop>=e.scrollHeight?t.classList.add("list-no-fade"):t.classList.remove("list-no-fade"))})},e}();g.fetchDefaultSettings={withCredentials:!0,method:"POST"},o.e.Collection=new g}}]);
//# sourceMappingURL=1.6ebead0135d1604ef354502ecb61e9df.js.map